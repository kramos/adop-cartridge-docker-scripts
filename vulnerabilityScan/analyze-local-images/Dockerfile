FROM golang:1.6

MAINTAINER Darren Jackson, <darren.a.jackson>

# install clair analyze-local-images tool
RUN cd $GOPATH/src && \
    go get -u github.com/coreos/clair/contrib/analyze-local-images

# install docker machine
RUN curl -fsSL https://get.docker.com/ | sh
RUN curl -L https://github.com/docker/machine/releases/download/v0.6.0/docker-machine-`uname -s`-`uname -m` >/usr/local/bin/docker-machine && \
    chmod +x /usr/local/bin/docker-machine

# pass image name at run time
ENTRYPOINT ["/go/bin/analyze-local-images"]
CMD ["--help"]
